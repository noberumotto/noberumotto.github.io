## åºè¨€

![avatar](d/æ‚/screen.jpg)

æœ€è¿‘æœ‰æŒºå¤šä¸œè¥¿æƒ³è®°å½•ä¸‹æ¥ï¼Œäºæ˜¯æŠ½ç©ºæ”¹äº†ä¸€ä¸‹æˆ‘çš„ `win95é£æ ¼` é™æ€åšå®¢ç½‘ç«™ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨ç”¨çš„è¿™ä¸ªï¼Œå®ƒæ”¾åœ¨ Github Pagesé‡Œï¼Œç”¨ `vue` å¼€å‘çš„ï¼Œæˆ‘å«å®ƒ `w95` ï¼Œå®ƒæ˜¯å¼€æºçš„ï¼Œä½ å¯ä»¥åœ¨æˆ‘çš„ä»“åº“ä¸­æ‰¾åˆ°å®ƒï¼Œä½†æ˜¯æºç å¤ªä¹±äº†æˆ‘æš‚æ—¶ä¸æ‰“ç®—pinåˆ°é¦–é¡µã€‚å…¶å®å¾ˆæ—©ä¹‹å‰æˆ‘ç”¨ `Gatsby.js` åšè¿‡ä¸€ä¸ªæ­£å¸¸ç½‘é¡µé£æ ¼çš„ï¼Œéƒ¨ç½²åœ¨æˆ‘è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œåæ¥ç»­ä¸èµ·æœåŠ¡å™¨è´¹ç”¨åŠ ä¸Šæ²¡ä»€ä¹ˆå†…å®¹å°±å…³æ‰äº†ã€‚

## Github Actions

æ¢åˆ° `Github Pages` åï¼Œæˆ‘åªéœ€è¦ç”¨ markdown å†™å¥½å†…å®¹ï¼Œç„¶åç¼–è¯‘æˆé™æ€ç½‘é¡µï¼Œæœ€åpushä¸Šå»å°±è¡Œäº†ã€‚ä½†æˆ‘æƒ³æ›´æ–¹ä¾¿ä¸€äº›ï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† `Github Actions` ã€‚ç°åœ¨æˆ‘åªéœ€è¦æäº¤å†…å®¹ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±äº¤ç»™å®ƒï¼Œç½‘ç«™å°±ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œçœæ‰äº†æ¯æ¬¡pushå‰ç¼–è¯‘ä¸€æ¬¡é™æ€æ–‡ä»¶çš„æ­¥éª¤ã€‚


å…³äº `Github Actions` ç½‘ä¸Šæœ‰å¾ˆå¤šä»‹ç»ï¼Œå…¶ä¸­åŒ…å«å¾ˆå¤šä¸“ä¸šåè¯ï¼Œè¿™äº›åœ¨æˆ‘å¹³æ—¶æ¥è§¦çš„å·¥ä½œä¸­æ˜¯å®Œå…¨ç”¨ä¸ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡åŠæ³•è§£é‡Šå®ƒæ˜¯ä»€ä¹ˆã€‚æˆ‘åªçŸ¥é“å®ƒå¯ä»¥åƒå†™ä»£ç ä¸€æ ·é€šè¿‡ç¼–å†™ä¸€ä¸ªæ–‡ä»¶ï¼ˆworkflowï¼‰å®ç°è®¢é˜…ä¸€äº›äº‹ä»¶ï¼ˆpushã€pull...ï¼‰ï¼Œåœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œï¼ˆActionï¼‰ã€‚



## # 01

ä¸ºäº†ä¿æŒåšå®¢å†…å®¹ä»“åº“å¹²å‡€ï¼Œæˆ‘å†³å®šæŠŠç¨‹åºæºä»£ç å’Œå†…å®¹åˆ†æˆä¸¤ä¸ªä»“åº“ï¼Œé™æ€æ–‡ä»¶å’Œå†…å®¹æ–‡ä»¶åˆ†æˆä¸¤ä¸ªåˆ†æ”¯ï¼Œè¿™æ ·ä¸ä¼šæ··åœ¨ä¸€å›¢ã€‚

åœ¨å†…å®¹ä»“åº“å­˜æ”¾å†…å®¹ã€é™æ€æ–‡ä»¶ä»¥åŠ `workflow` æ–‡ä»¶ã€‚

åœ¨ `w95` ï¼Œå†…å®¹æ–‡ä»¶æ˜¯æ”¾åœ¨æºç ç›®å½•ä¸­çš„ `src\disk` ä¸‹çš„ï¼Œæ‰€ä»¥è¦æŠŠ `disk` æ–‡ä»¶å¤¹æ‹¿å‡ºæ¥æ”¾åˆ°è¿™ä¸ªä»“åº“ä¸­ï¼Œæˆ‘æŠŠå®ƒæ”¾åˆ° `master` åˆ†æ”¯ã€‚

éšåè¦åˆ›å»ºä¸€ä¸ªé™æ€æ–‡ä»¶åˆ†æ”¯ï¼Œç”¨æ¥å­˜æ”¾ç¼–è¯‘åçš„ `vue` ç½‘é¡µæ–‡ä»¶ï¼Œæˆ‘æ”¾åˆ°äº† `ghpage` åˆ†æ”¯ï¼Œæœ€ååˆ°ä»“åº“è®¾ç½®ä¸­å°† `Pages` `Source` åˆ‡æ¢åˆ° `ghpage`ã€‚

## # 02

åˆ›å»º Actions workflow

åœ¨ä»“åº“ä¸­å¯ä»¥çœ‹åˆ° Actions é€‰é¡¹ï¼Œç‚¹è¿›å»èƒ½çœ‹åˆ°è¿™ä¸ªä»“åº“æ‰€æœ‰çš„ workflowï¼Œä»¥åŠæ‰§è¡Œè®°å½•ç­‰ç­‰ã€‚

ç‚¹å‡» `New workflow` > `set up a workflow yourself` å¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„workflow

main.yml
```yml
# ä»w95ä»“åº“æ‹‰å–æºç ç„¶åæ„å»ºé™æ€ç½‘é¡µ

name: Build & Deploy from w95 repo

on:
  # åªæœ‰åœ¨ master åˆ†æ”¯ä¿®æ”¹æ—¶æ‰§è¡Œ
  push:
    branches: [ "master" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  # æ‹‰å–ä¸¤ä¸ªä»“åº“æ–‡ä»¶ç„¶åæ„å»º
  build:
    # The type of runner that the job will run on
    runs-on: windows-2019

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # è·å–é™æ€æ•°æ®
      - name: checkout data ğŸ’½
        uses: actions/checkout@v3
        with:
          path: data

      # è·å–æºç 
      - name: clone w95 ğŸ“€
        uses: actions/checkout@v3
        with:
          repository: noberumotto/w95
          path: w95

      # åˆå¹¶
      - name: copy files ğŸ’¾
        run: |
          Xcopy /Y /E /I data w95\source\src
          cd w95\source\src
          dir
      # æ„å»ºé™æ€æ–‡ä»¶
      - name: build ğŸ› 
        working-directory: w95\source
        run: |
          npm install
          npm run w95file
          npm run build
      # ä¸Šä¼ 
      - name: upload ğŸ“¤
        uses: actions/upload-artifact@v1
        with:
          name: site
          path: w95\source\dist
  # å‘å¸ƒé™æ€æ–‡ä»¶
  deploy:
    concurrency: ci-${{ github.ref }}
    needs: [build]
    runs-on: ubuntu-latest
    steps:
      - name: checkout data
        uses: actions/checkout@v3
      # ä¸‹è½½
      - name: download ğŸ“¥
        uses: actions/download-artifact@v1
        with:
          name: site
      # å‘å¸ƒ
      - name: deploy ğŸ‰
        uses: JamesIves/github-pages-deploy-action@v4.3.3
        with:
          # å‘å¸ƒåˆ° ghpage åˆ†æ”¯ä¸Š
          branch: ghpage
          folder: 'site'
```

ä¿å­˜å¹¶æäº¤åä¼šç«‹å³è§¦å‘äº‹ä»¶æ‰§è¡Œè¿™ä¸ª workflow æ–‡ä»¶

è¿™é‡Œå¾ˆæœ‰æ„æ€çš„ä¸€ä¸ªåœ°æ–¹æ˜¯æ„å»ºæ“ä½œå’Œå‘å¸ƒåˆ°Github Pagesæ“ä½œæ˜¯åœ¨ä¸¤ä¸ªä¸åŒçš„æœåŠ¡å™¨ç³»ç»Ÿä¸Šæ‰§è¡Œçš„ï¼Œå…¶ä¸­æ„å»ºæ“ä½œæ˜¯åœ¨ `windows` ï¼Œå‘å¸ƒæ˜¯åœ¨ `ubuntu`ã€‚

è¿™æ ·åšçš„åŸå› æ˜¯å› ä¸º `w95` è¦å®ç°å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´å±æ€§ï¼Œå°±è¦åœ¨ç¼–è¯‘é™æ€æ–‡ä»¶çš„æ—¶å€™ä½¿ç”¨ `nodejs` é‡Œçš„ `fs.statSync` æ–¹æ³•è·å–æ–‡ä»¶çš„ä¿¡æ¯ç„¶åä¿å­˜èµ·æ¥ï¼Œè€Œå¦‚æœåªä½¿ç”¨ `windows` å°±æ²¡åŠæ³•å®Œæˆ `deploy` `action`ï¼Œä¸è¿‡è¿™ä¸ªé—®é¢˜å…¶å®å¯ä»¥è§£å†³ï¼Œåªæ˜¯æˆ‘æ‡’å¾—å»æäº†ï¼Œèƒ½ç”¨ç°æˆçš„ `action`å°±ç”¨ç°æˆçš„ï¼Œé‚£å¦‚æœåªä½¿ç”¨ `ubuntu` åˆ™ä¼šå¯¼è‡´åœ¨æ„å»ºé™æ€æ–‡ä»¶æ—¶è·å–æ–‡ä»¶çš„æ—¶é—´ä¸æ­£ç¡®ï¼Œåªè¦ `workflow` æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€æœ‰æ–‡ä»¶çš„åˆ›å»ºã€ä¿®æ”¹æ—¶é—´éƒ½ä¼šæ›´æ–°æˆæ‰§è¡Œæ—¶çš„æ—¶é—´ã€‚

æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåˆ†æˆä¸¤ä¸ªæ“ä½œç³»ç»Ÿæ‰§è¡Œ `workflow`ã€‚


## # 03

å°±è¿™æ ·ï¼Œæ‰€æœ‰çš„æ­¥éª¤å®Œæˆäº†ã€‚